<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The official Rust implementation of the BLAKE3 cryptographic hash function."><title>iroh::blobs::store::bao_tree::blake3 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../../static.files/rustdoc-b21aa549bf6d91ff.css"><meta name="rustdoc-vars" data-root-path="../../../../../" data-static-root-path="../../../../../static.files/" data-current-crate="iroh" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (c987ad527 2024-05-01)" data-channel="nightly" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../../static.files/storage-e32f0c247825364d.js"></script><script defer src="../../../../../crates.js"></script><script defer src="../../../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../../../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../iroh/index.html">iroh</a><span class="version">0.24.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In iroh::blobs::store::bao_tree</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../../../iroh/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a href="../../../../index.html">iroh</a>::<wbr><a href="../../../index.html">blobs</a>::<wbr><a href="../../index.html">store</a>::<wbr><a href="../index.html">bao_tree</a>::<wbr><a class="mod" href="#">blake3</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The official Rust implementation of the <a href="https://blake3.io">BLAKE3</a> cryptographic hash
function.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Hash an input all at once.
</span><span class="kw">let </span>hash1 = iroh_blake3::hash(<span class="string">b"foobarbaz"</span>);

<span class="comment">// Hash an input incrementally.
</span><span class="kw">let </span><span class="kw-2">mut </span>hasher = iroh_blake3::Hasher::new();
hasher.update(<span class="string">b"foo"</span>);
hasher.update(<span class="string">b"bar"</span>);
hasher.update(<span class="string">b"baz"</span>);
<span class="kw">let </span>hash2 = hasher.finalize();
<span class="macro">assert_eq!</span>(hash1, hash2);

<span class="comment">// Extended output. OutputReader also implements Read and Seek.
</span><span class="kw">let </span><span class="kw-2">mut </span>output = [<span class="number">0</span>; <span class="number">1000</span>];
<span class="kw">let </span><span class="kw-2">mut </span>output_reader = hasher.finalize_xof();
output_reader.fill(<span class="kw-2">&amp;mut </span>output);
<span class="macro">assert_eq!</span>(hash1, output[..<span class="number">32</span>]);

<span class="comment">// Print a hash as hex.
</span><span class="macro">println!</span>(<span class="string">"{}"</span>, hash1);</code></pre></div>
<h2 id="cargo-features"><a class="doc-anchor" href="#cargo-features">§</a>Cargo Features</h2>
<p>The <code>std</code> feature (the only feature enabled by default) is required for
implementations of the <a href="https://doc.rust-lang.org/std/io/trait.Write.html"><code>Write</code></a> and <a href="https://doc.rust-lang.org/std/io/trait.Seek.html"><code>Seek</code></a> traits, and also for runtime
CPU feature detection on x86. If this feature is disabled, the only way to
use the x86 SIMD implementations is to enable the corresponding instruction
sets globally, with e.g. <code>RUSTFLAGS=&quot;-C target-cpu=native&quot;</code>. The resulting
binary will not be portable to other machines.</p>
<p>The <code>rayon</code> feature (disabled by default, but enabled for <a href="https://docs.rs/">docs.rs</a>) adds
the <a href="struct.Hasher.html#method.update_rayon"><code>Hasher::update_rayon</code></a> method, for multithreaded hashing. However,
even if this feature is enabled, all other APIs remain single-threaded.</p>
<p>The NEON implementation is enabled by default for AArch64 but requires the
<code>neon</code> feature for other ARM targets. Not all ARMv7 CPUs support NEON, and
enabling this feature will produce a binary that’s not portable to CPUs
without NEON support.</p>
<p>The <code>traits-preview</code> feature enables implementations of traits from the
RustCrypto <a href="https://crates.io/crates/digest"><code>digest</code></a> crate, and re-exports that crate as
<code>traits::digest</code>. However, the traits aren’t stable, and they’re expected to
change in incompatible ways before that crate reaches 1.0. For that reason,
this crate makes no SemVer guarantees for this feature, and callers who use
it should expect breaking changes between patch versions. (The “-preview”
feature name follows the conventions of the RustCrypto <a href="https://crates.io/crates/signature"><code>signature</code></a> crate.)</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Hash.html" title="struct iroh::blobs::store::bao_tree::blake3::Hash">Hash</a></div><div class="desc docblock-short">An output of the default size, 32 bytes, which provides constant-time
equality checking.</div></li><li><div class="item-name"><a class="struct" href="struct.Hasher.html" title="struct iroh::blobs::store::bao_tree::blake3::Hasher">Hasher</a></div><div class="desc docblock-short">An incremental hash state that can accept any number of writes.</div></li><li><div class="item-name"><a class="struct" href="struct.HexError.html" title="struct iroh::blobs::store::bao_tree::blake3::HexError">HexError</a></div><div class="desc docblock-short">The error type for <a href="struct.Hash.html#method.from_hex" title="associated function iroh::blobs::store::bao_tree::blake3::Hash::from_hex"><code>Hash::from_hex</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.OutputReader.html" title="struct iroh::blobs::store::bao_tree::blake3::OutputReader">OutputReader</a></div><div class="desc docblock-short">An incremental reader for extended output, returned by
<a href="struct.Hasher.html#method.finalize_xof"><code>Hasher::finalize_xof</code></a>.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.KEY_LEN.html" title="constant iroh::blobs::store::bao_tree::blake3::KEY_LEN">KEY_LEN</a></div><div class="desc docblock-short">The number of bytes in a key, 32.</div></li><li><div class="item-name"><a class="constant" href="constant.OUT_LEN.html" title="constant iroh::blobs::store::bao_tree::blake3::OUT_LEN">OUT_LEN</a></div><div class="desc docblock-short">The number of bytes in a <a href="struct.Hash.html"><code>Hash</code></a>, 32.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.derive_key.html" title="fn iroh::blobs::store::bao_tree::blake3::derive_key">derive_key</a></div><div class="desc docblock-short">The key derivation function.</div></li><li><div class="item-name"><a class="fn" href="fn.hash.html" title="fn iroh::blobs::store::bao_tree::blake3::hash">hash</a></div><div class="desc docblock-short">The default hash function.</div></li><li><div class="item-name"><a class="fn" href="fn.keyed_hash.html" title="fn iroh::blobs::store::bao_tree::blake3::keyed_hash">keyed_hash</a></div><div class="desc docblock-short">The keyed hash function.</div></li></ul></section></div></main></body></html>