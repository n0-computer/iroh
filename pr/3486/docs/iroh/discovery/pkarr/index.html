<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A discovery service which publishes and resolves node information using a pkarr relay."><title>iroh::discovery::pkarr - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="iroh" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0-nightly (f280acf4c 2025-02-19)" data-channel="nightly" data-search-js="search-f7327375.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-3a5871a4.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-5332ae0c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../iroh/index.html">iroh</a><span class="version">0.92.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module pkarr</a></h2><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In iroh::<wbr>discovery</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">iroh</a>::<wbr><a href="../index.html">discovery</a></div><h1>Module <span>pkarr</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/iroh/discovery/pkarr.rs.html#1-618">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A discovery service which publishes and resolves node information using a <a href="https://pkarr.org">pkarr</a> relay.</p>
<p>Public-Key Addressable Resource Records, <a href="https://pkarr.org">pkarr</a>, is a system which allows publishing
<a href="https://en.wikipedia.org/wiki/Domain_Name_System#Resource_records">DNS Resource Records</a> owned by a particular <a href="../../struct.SecretKey.html" title="struct iroh::SecretKey"><code>SecretKey</code></a> under a name derived from its
corresponding <a href="../../struct.PublicKey.html" title="struct iroh::PublicKey"><code>PublicKey</code></a>, also known as the <a href="../../type.NodeId.html" title="type iroh::NodeId"><code>NodeId</code></a>.  Additionally this pkarr
Resource Record is signed using the same <a href="../../struct.SecretKey.html" title="struct iroh::SecretKey"><code>SecretKey</code></a>, ensuring authenticity of the
record.</p>
<p>Pkarr normally stores these records on the <a href="https://en.wikipedia.org/wiki/Mainline_DHT">Mainline DHT</a>, but also provides two bridges
that do not require clients to directly interact with the DHT:</p>
<ul>
<li>
<p>Resolvers are servers which expose the pkarr Resource Record under a domain name,
e.g. <code>o3dks..6uyy.dns.iroh.link</code>.  This allows looking up the pkarr Resource Records
using normal DNS clients.  These resolvers would normally perform lookups on the
Mainline DHT augmented with a local cache to improve performance.</p>
</li>
<li>
<p>Relays are servers which allow both publishing and looking up of the pkarr Resource
Records using HTTP PUT and GET requests.  They will usually perform the publishing to
the Mainline DHT on behalf on the client as well as cache lookups performed on the DHT
to improve performance.</p>
</li>
</ul>
<p>For node discovery in iroh the pkarr Resource Records contain the addressing information,
providing nodes which retrieve the pkarr Resource Record with enough detail
to contact the iroh node.</p>
<p>There are several node discovery services built on top of pkarr, which can be composed
to the application’s needs:</p>
<ul>
<li>
<p><a href="struct.PkarrPublisher.html" title="struct iroh::discovery::pkarr::PkarrPublisher"><code>PkarrPublisher</code></a>, which publishes to a pkarr relay server using HTTP.</p>
</li>
<li>
<p><a href="struct.PkarrResolver.html" title="struct iroh::discovery::pkarr::PkarrResolver"><code>PkarrResolver</code></a>, which resolves from a pkarr relay server using HTTP.</p>
</li>
<li>
<p><a href="../dns/struct.DnsDiscovery.html" title="struct iroh::discovery::dns::DnsDiscovery"><code>DnsDiscovery</code></a>, which resolves from a DNS server.</p>
</li>
<li>
<p><a href="dht/struct.DhtDiscovery.html" title="struct iroh::discovery::pkarr::dht::DhtDiscovery"><code>DhtDiscovery</code></a>, which resolves and publishes from both pkarr relay servers and well
as the Mainline DHT.</p>
</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="dht/index.html" title="mod iroh::discovery::pkarr::dht">dht</a><wbr><span class="stab portability" title="Available on crate feature `discovery-pkarr-dht` only"><code>discovery-pkarr-dht</code></span></dt><dd>Pkarr based node discovery for iroh, supporting both relay servers and the DHT.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.PkarrPublisher.html" title="struct iroh::discovery::pkarr::PkarrPublisher">Pkarr<wbr>Publisher</a></dt><dd>Publisher of node discovery information to a <a href="https://pkarr.org">pkarr</a> relay.</dd><dt><a class="struct" href="struct.PkarrPublisherBuilder.html" title="struct iroh::discovery::pkarr::PkarrPublisherBuilder">Pkarr<wbr>Publisher<wbr>Builder</a></dt><dd>Builder for <a href="struct.PkarrPublisher.html" title="struct iroh::discovery::pkarr::PkarrPublisher"><code>PkarrPublisher</code></a>.</dd><dt><a class="struct" href="struct.PkarrRelayClient.html" title="struct iroh::discovery::pkarr::PkarrRelayClient">Pkarr<wbr>Relay<wbr>Client</a></dt><dd>A <a href="https://pkarr.org">pkarr</a> client to publish [<code>pkarr::SignedPacket</code>]s to a pkarr relay.</dd><dt><a class="struct" href="struct.PkarrResolver.html" title="struct iroh::discovery::pkarr::PkarrResolver">Pkarr<wbr>Resolver</a></dt><dd>Resolver of node discovery information from a <a href="https://pkarr.org">pkarr</a> relay.</dd><dt><a class="struct" href="struct.PkarrResolverBuilder.html" title="struct iroh::discovery::pkarr::PkarrResolverBuilder">Pkarr<wbr>Resolver<wbr>Builder</a></dt><dd>Builder for <a href="struct.PkarrResolver.html" title="struct iroh::discovery::pkarr::PkarrResolver"><code>PkarrResolver</code></a>.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.PkarrError.html" title="enum iroh::discovery::pkarr::PkarrError">Pkarr<wbr>Error</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.DEFAULT_PKARR_TTL.html" title="constant iroh::discovery::pkarr::DEFAULT_PKARR_TTL">DEFAULT_<wbr>PKARR_<wbr>TTL</a></dt><dd>Default TTL for the records in the pkarr signed packet.</dd><dt><a class="constant" href="constant.DEFAULT_REPUBLISH_INTERVAL.html" title="constant iroh::discovery::pkarr::DEFAULT_REPUBLISH_INTERVAL">DEFAULT_<wbr>REPUBLISH_<wbr>INTERVAL</a></dt><dd>Interval in which to republish the node info even if unchanged: 5 minutes.</dd><dt><a class="constant" href="constant.N0_DNS_PKARR_RELAY_PROD.html" title="constant iroh::discovery::pkarr::N0_DNS_PKARR_RELAY_PROD">N0_<wbr>DNS_<wbr>PKARR_<wbr>RELAY_<wbr>PROD</a></dt><dd>The production pkarr relay run by <a href="https://n0.computer">number 0</a>.</dd><dt><a class="constant" href="constant.N0_DNS_PKARR_RELAY_STAGING.html" title="constant iroh::discovery::pkarr::N0_DNS_PKARR_RELAY_STAGING">N0_<wbr>DNS_<wbr>PKARR_<wbr>RELAY_<wbr>STAGING</a></dt><dd>The testing pkarr relay run by <a href="https://n0.computer">number 0</a>.</dd></dl></section></div></main></body></html>